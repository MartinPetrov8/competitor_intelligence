<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Competitor Intelligence â€” 2026-03-01</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f0f2f5;
      color: #1a1a2e;
      min-height: 100vh;
    }

    /* â”€â”€ Header â”€â”€ */
    .header {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,.35);
    }
    .header h1 { font-size: 1.35rem; font-weight: 700; letter-spacing: .02em; }
    .header .subtitle { font-size: .8rem; opacity: .65; margin-top: .15rem; }
    .header .logo { font-size: 1.6rem; }
    .last-updated { margin-left: auto; font-size: .75rem; opacity: .7; white-space: nowrap; text-align: right; }
    .static-badge {
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.25);
      border-radius: 4px;
      padding: .15rem .45rem;
      font-size: .7rem;
      font-weight: 600;
      letter-spacing: .04em;
      margin-top: .2rem;
    }

    /* â”€â”€ Nav tabs â”€â”€ */
    .tab-bar {
      background: #fff;
      border-bottom: 2px solid #e2e8f0;
      display: flex;
      gap: 0;
      padding: 0 2rem;
      overflow-x: auto;
    }
    .tab-btn {
      padding: .75rem 1.25rem;
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: .9rem;
      font-weight: 500;
      color: #64748b;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
      transition: color .15s, border-color .15s;
      white-space: nowrap;
    }
    .tab-btn:hover { color: #0f172a; }
    .tab-btn.active { color: #2563eb; border-bottom-color: #2563eb; }

    /* â”€â”€ Main content â”€â”€ */
    .content { padding: 1.5rem 2rem; max-width: 1400px; margin: 0 auto; }

    /* â”€â”€ Cards â”€â”€ */
    .card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,.07);
      overflow: hidden;
      margin-bottom: 1.25rem;
    }
    .card-header {
      padding: .9rem 1.25rem;
      font-weight: 700;
      font-size: .95rem;
      border-bottom: 1px solid #f1f5f9;
      display: flex;
      align-items: center;
      gap: .5rem;
    }
    .card-body { padding: 1.25rem; }

    /* â”€â”€ Tables â”€â”€ */
    .table-wrap { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; font-size: .875rem; }
    thead th {
      background: #f8fafc;
      padding: .65rem 1rem;
      text-align: left;
      font-weight: 700;
      color: #475569;
      font-size: .8rem;
      text-transform: uppercase;
      letter-spacing: .04em;
      border-bottom: 2px solid #e2e8f0;
    }
    tbody tr { border-bottom: 1px solid #f1f5f9; transition: background .1s; }
    tbody tr:hover { background: #f8fafc; }
    tbody td { padding: .65rem 1rem; color: #1e293b; }

    /* â”€â”€ Chips â”€â”€ */
    .summary-bar {
      display: flex;
      flex-wrap: wrap;
      gap: .75rem;
      margin-bottom: 1.25rem;
    }
    .chip {
      background: #fff;
      border-radius: 8px;
      padding: .75rem 1.1rem;
      box-shadow: 0 1px 4px rgba(0,0,0,.07);
      display: flex;
      flex-direction: column;
      gap: .2rem;
      flex: 1;
      min-width: 140px;
    }
    .chip .chip-label { font-size: .72rem; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: .04em; }
    .chip .chip-value { font-size: 1.35rem; font-weight: 800; color: #1e293b; }
    .chip .chip-sub { font-size: .75rem; color: #94a3b8; }

    /* â”€â”€ Price badge â”€â”€ */
    .price-badge { display: inline-flex; align-items: center; gap: .3rem; font-weight: 700; color: #15803d; }
    .price-badge.high { color: #dc2626; }
    .price-badge.mid  { color: #d97706; }

    /* â”€â”€ Competitor dot â”€â”€ */
    .competitor-dot {
      display: inline-block;
      width: 10px; height: 10px;
      border-radius: 50%;
      margin-right: .35rem;
    }

    /* â”€â”€ Badge â”€â”€ */
    .badge { display: inline-block; padding: .15rem .5rem; border-radius: 999px; font-size: .72rem; font-weight: 700; }
    .badge-green { background: #dcfce7; color: #15803d; }
    .badge-gray  { background: #f1f5f9; color: #475569; }
    .badge-blue  { background: #eff6ff; color: #2563eb; }
    .badge-red   { background: #fef2f2; color: #dc2626; }

    /* â”€â”€ Chart container â”€â”€ */
    .chart-container { position: relative; height: 300px; }
    .charts-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.25rem;
      margin-bottom: 1.25rem;
    }
    @media (max-width: 900px) { .charts-row { grid-template-columns: 1fr; } }

    /* â”€â”€ Tab panels â”€â”€ */
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* â”€â”€ Rating â”€â”€ */
    .rating-stars { color: #f59e0b; font-weight: 700; letter-spacing: .05em; }
    .rating-num   { font-weight: 800; color: #1e293b; }

    /* â”€â”€ Diff viewer â”€â”€ */
    .diff-item {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      margin-bottom: 1rem;
      overflow: hidden;
    }
    .diff-item-header {
      display: flex;
      align-items: center;
      gap: .75rem;
      padding: .65rem 1rem;
      background: #f8fafc;
      border-bottom: 1px solid #e2e8f0;
      flex-wrap: wrap;
    }
    .diff-item-header .competitor-name { font-weight: 700; font-size: .875rem; display: flex; align-items: center; gap: .35rem; }
    .diff-meta { font-size: .78rem; color: #64748b; }
    .diff-counts { margin-left: auto; display: flex; gap: .4rem; }
    .diff-add-count { color: #15803d; font-weight: 700; font-size: .78rem; }
    .diff-rem-count { color: #dc2626; font-weight: 700; font-size: .78rem; }
    .diff-body {
      padding: .75rem;
      background: #0f172a;
      max-height: 500px;
      overflow-y: auto;
    }
    .diff-pre {
      font-family: "SFMono-Regular", "Fira Code", "Consolas", monospace;
      font-size: .78rem;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .diff-line { display: block; padding: 0 .25rem; border-radius: 2px; }
    .diff-line-add { background: rgba(21,128,61,.25); color: #86efac; }
    .diff-line-rem { background: rgba(220,38,38,.2);  color: #fca5a5; }
    .diff-line-hdr { color: #93c5fd; font-weight: 700; }
    .diff-line-ctx { color: #94a3b8; }
    .diff-no-changes { padding: .5rem 1rem; font-size: .82rem; color: #94a3b8; font-style: italic; }


    /* â”€â”€ Source tabs â”€â”€ */
    .source-tabs { display: flex; gap: .5rem; margin-bottom: 1rem; }
    .source-tab-btn {
      padding: .35rem .85rem;
      border: 1.5px solid #e2e8f0;
      border-radius: 999px;
      background: #fff;
      cursor: pointer;
      font-size: .825rem;
      font-weight: 600;
      color: #64748b;
      transition: all .15s;
    }
    .source-tab-btn.active { background: #2563eb; border-color: #2563eb; color: #fff; }

    /* â”€â”€ Section heading â”€â”€ */
    .section-date-label {
      font-size: .78rem;
      color: #94a3b8;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .04em;
      margin: 1.25rem 0 .5rem;
      padding: 0 .25rem;
    }

    /* â”€â”€ Empty state â”€â”€ */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 1rem;
      gap: .75rem;
      color: #94a3b8;
    }
    .empty-state .icon { font-size: 2.5rem; }
    .empty-state .label { font-size: .9rem; font-weight: 500; }

    /* â”€â”€ Addon tags â”€â”€ */
    .addon-tag {
      display: inline-block;
      padding: .1rem .4rem;
      border-radius: 4px;
      font-size: .7rem;
      font-weight: 600;
      background: #f1f5f9;
      color: #475569;
      margin: .1rem;
    }

    @media (max-width: 640px) {
      .content { padding: 1rem; }
      .header { padding: .75rem 1rem; }
      .tab-bar { padding: 0 1rem; }
    }
  </style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="logo">ğŸ“Š</div>
  <div>
    <h1 class="header">Competitor Intelligence Tracker</h1>
    <div class="subtitle">DummyVisaTicket â€” Daily monitoring dashboard</div>
  </div>
  <div class="last-updated">
    <div>Generated 2026-03-01 07:16 UTC</div>
    <div class="static-badge">STATIC SNAPSHOT</div>
  </div>
</header>

<!-- Tab bar -->
<nav class="tab-bar" role="tablist">
  <button class="tab-btn active" data-tab="pricing"  role="tab">ğŸ’° Pricing</button>
  <button class="tab-btn"        data-tab="reviews"  role="tab">â­ Reviews</button>
  <button class="tab-btn"        data-tab="diffs"    role="tab">ğŸ”„ Site Diffs</button>
  <button class="tab-btn"        data-tab="abtests"  role="tab">ğŸ§ª A/B Tests</button>
</nav>

<main class="content">
  <section class="tab-panel active" id="tab-pricing"></section>
  <section class="tab-panel"        id="tab-reviews"></section>
  <section class="tab-panel"        id="tab-diffs"></section>
  <section class="tab-panel"        id="tab-abtests"></section>
</main>

<script>
// â”€â”€ Embedded data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DATA = {"competitors": [{"id": 2, "domain": "bestonwardticket.com", "base_url": "https://bestonwardticket.com"}, {"id": 4, "domain": "dummy-tickets.com", "base_url": "https://dummy-tickets.com"}, {"id": 3, "domain": "dummyticket.com", "base_url": "https://dummyticket.com"}, {"id": 1, "domain": "onwardticket.com", "base_url": "https://onwardticket.com"}, {"id": 5, "domain": "vizafly.com", "base_url": "https://www.vizafly.com"}], "prices_v2": [{"competitor": "bestonwardticket.com", "scrape_date": "2026-03-01", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-03-01", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-03-01", "main_price": 15.0, "currency": "USD", "addons": [], "source_url": "https://dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-03-01", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-03-01", "main_price": 12.0, "currency": "USD", "addons": [], "source_url": "https://www.vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "main_price": 15.0, "currency": "USD", "addons": [], "source_url": "https://dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-28", "main_price": 12.0, "currency": "USD", "addons": [], "source_url": "https://www.vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "main_price": 15.0, "currency": "USD", "addons": [], "source_url": "https://dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-27", "main_price": 12.0, "currency": "USD", "addons": [], "source_url": "https://www.vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-26", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-26", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-26", "main_price": 15.0, "currency": "USD", "addons": [], "source_url": "https://dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-26", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-26", "main_price": 12.0, "currency": "USD", "addons": [], "source_url": "https://www.vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-25", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-25", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-25", "main_price": 15.0, "currency": "USD", "addons": [], "source_url": "https://dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-25", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-25", "main_price": 12.0, "currency": "USD", "addons": [], "source_url": "https://www.vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-23", "main_price": 14.0, "currency": "USD", "addons": [{"name": "Round Trip", "price": 7.0}, {"name": "7 days", "price": 7.0}, {"name": "14 days", "price": 10.0}, {"name": "I want to receive my ticket later", "price": 1.0}], "source_url": "https://bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-23", "main_price": 5.0, "currency": "USD", "addons": [], "source_url": "https://dummy-tickets.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-23", "main_price": 16.0, "currency": "USD", "addons": [], "source_url": "https://onwardticket.com"}], "reviews_trustpilot": [{"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "overall_rating": 4.6, "total_reviews": 1030, "source_url": "https://www.trustpilot.com/review/bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "overall_rating": 4.5, "total_reviews": 1309, "source_url": "https://www.trustpilot.com/review/dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "overall_rating": 4.3, "total_reviews": 356, "source_url": "https://www.trustpilot.com/review/dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "overall_rating": 4.8, "total_reviews": 529, "source_url": "https://www.trustpilot.com/review/onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-28", "overall_rating": 0.0, "total_reviews": 0, "source_url": "https://www.trustpilot.com/review/vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "overall_rating": 4.6, "total_reviews": 1026, "source_url": "https://www.trustpilot.com/review/bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "overall_rating": 4.5, "total_reviews": 1309, "source_url": "https://www.trustpilot.com/review/dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "overall_rating": 4.3, "total_reviews": 356, "source_url": "https://www.trustpilot.com/review/dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "overall_rating": 4.8, "total_reviews": 528, "source_url": "https://www.trustpilot.com/review/onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-27", "overall_rating": 0.0, "total_reviews": 0, "source_url": "https://www.trustpilot.com/review/vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-26", "overall_rating": 4.6, "total_reviews": 1026, "source_url": "https://www.trustpilot.com/review/bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-26", "overall_rating": 4.5, "total_reviews": 1309, "source_url": "https://www.trustpilot.com/review/dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-26", "overall_rating": 4.3, "total_reviews": 356, "source_url": "https://www.trustpilot.com/review/dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-26", "overall_rating": 4.8, "total_reviews": 527, "source_url": "https://www.trustpilot.com/review/onwardticket.com"}, {"competitor": "vizafly.com", "scrape_date": "2026-02-26", "overall_rating": 0.0, "total_reviews": 0, "source_url": "https://www.trustpilot.com/review/vizafly.com"}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-23", "overall_rating": 4.6, "total_reviews": 1022, "source_url": "https://www.trustpilot.com/review/bestonwardticket.com"}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-23", "overall_rating": 4.5, "total_reviews": 1308, "source_url": "https://www.trustpilot.com/review/dummy-tickets.com"}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-23", "overall_rating": 4.3, "total_reviews": 356, "source_url": "https://www.trustpilot.com/review/dummyticket.com"}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-23", "overall_rating": 4.8, "total_reviews": 526, "source_url": "https://www.trustpilot.com/review/onwardticket.com"}], "reviews_google": [], "reviews_sentiment": [{"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Service Issues", "mention_count": 2, "sample_quotes": ["they gave me a legit reservation", "they didn't calm my worries"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Website Issues", "mention_count": 2, "sample_quotes": ["they sent the voucher quickly", "the reservation... marks were very evident"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Dummy Reservation", "mention_count": 1, "sample_quotes": ["I used the services of BestOnwardTicket on June 1st, 2025, to enter Thailand, where a return ticket was required. They gave me some PDF but the ticket number couldn't be tracked on the airlines websit"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Incorrect Ticket", "mention_count": 1, "sample_quotes": ["The ticket they initially issued was incorrect, and I clearly explained the specific change needed (departure and arrival dates), but there was no timely assistance or reassurance that the ..."]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "No Response", "mention_count": 1, "sample_quotes": ["The ticket they initially issued was incorrect, and I clearly explained the specific change needed (departure and arrival dates), but there was no timely assistance or reassurance that the ..."]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Spelling Mistake", "mention_count": 1, "sample_quotes": ["I used the services of BestOnwardTicket on June 1st, 2025, to enter Thailand, where a return ticket was required. They gave me some PDF but the ticket number couldn't be tracked on the airlines websit"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Invalid Ticket Period", "mention_count": 1, "sample_quotes": ["I had an extremely frustrating experience with this company. I urgently needed my ticket corrected and printed, yet I received little to no response despite sending multiple follow-ups over several ho"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "No Tracking", "mention_count": 1, "sample_quotes": ["The ticket they initially issued was incorrect, and I clearly explained the specific change needed (departure and arrival dates), but there was no timely assistance or reassurance that the ..."]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Fake Ticket", "mention_count": 1, "sample_quotes": ["They sent me simple PDF and with the reference code its not able check it on airline sites, its just fake ticket, such scam website"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Useless Service", "mention_count": 1, "sample_quotes": ["I bought a ticket and they gave a printable PDF of my flight booking but when I went to the airline website and tried to enter the reservation number, there was a notice that came up saying I would ne"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Canceled Ticket", "mention_count": 1, "sample_quotes": ["I wanted to give a try to this site because supposedly you can choose the flight so I bought a ticket with KLM! and then: ..."]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "PNR Validity", "mention_count": 1, "sample_quotes": ["don't waste your for so called +7$", "7 days"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Ticket Appearance", "mention_count": 1, "sample_quotes": ["does not look like a ticket"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Ticket Validity", "mention_count": 1, "sample_quotes": ["ticket you present at immigration checkin is a PRE-BOOKING"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Reference Code Problem", "mention_count": 1, "sample_quotes": ["can't find it anywhere"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Delivery Window", "mention_count": 1, "sample_quotes": ["they do send... 60 minute window"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Reservation Number", "mention_count": 1, "sample_quotes": ["they gave me a quick refund"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Communication", "mention_count": 1, "sample_quotes": ["the website doesn't make... distinction"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Invalid Ticket Validity", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Scammy Service", "mention_count": 4, "sample_quotes": ["They almost scam me", "they charged me via PayPal for 2 items"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Expired Ticket", "mention_count": 4, "sample_quotes": ["they gave you the wrong or expired tickets"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Unprofessional Service", "mention_count": 4, "sample_quotes": ["they are unprofessional", "no. is not reachable"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Fraud", "mention_count": 4, "sample_quotes": ["Don't fall for their scam", "they are fraud"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Fewer Valid Days of Tickets", "mention_count": 3, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Ticket Didn't Work Upon Checking Through", "mention_count": 3, "sample_quotes": ["I won't be able to take their service again. Especially if someone applying for visa, do not use unverifiable ticket."]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "PNR Remains Active But Ticket Canceled After 2 Days", "mention_count": 3, "sample_quotes": ["be careful and don't expect it to remain active for a week or 14 days. Always good to get cancellable tickets. The visa was stamped btw."]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Cancellable Tickets", "mention_count": 3, "sample_quotes": ["Always good to get cancellable tickets."]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 2, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Invalidity Issues", "mention_count": 4, "sample_quotes": ["I received... short-validity...", "They say... but for 2-3 days"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Poor Customer Service", "mention_count": 4, "sample_quotes": ["Inability to communicate...", "Inability to communicate professionally..."]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Scammy Website", "mention_count": 4, "sample_quotes": ["Scammers!!!", "DO NOT USE..."]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Invalidity Claims", "mention_count": 4, "sample_quotes": ["I received... short-validity...", "They claim... but for 2-3 days"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Unreliable Service", "mention_count": 4, "sample_quotes": ["Very very bad service...", "I ordered..."]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 2, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Service Not Matching", "mention_count": 2, "sample_quotes": ["not in the same format", "not accepted"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "No Ticket Number", "mention_count": 4, "sample_quotes": ["Onwardticket did refund our purchase after we explained what happed.", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "No Passenger Code Recognition", "mention_count": 4, "sample_quotes": ["I had booked a ticket through their platform at the airport on March 9, 2025, and received a PDF file with the booking details.", "the support team sent a screenshot showing that the booking supposedly existed."]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 3, "theme": "Refund Process", "mention_count": 4, "sample_quotes": ["Support kindly told me a refund for my order has been processed for the inconvenience.", "I personally recommend that the reservation is booked with enough time if you are willing"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Slow Delivery", "mention_count": 3, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Missing Actual Ticket", "mention_count": 3, "sample_quotes": ["never arrived", "missed my flight"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 2, "theme": "Inconvenience with Itinerary Check", "mention_count": 3, "sample_quotes": ["no option", "appreciate refund"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Overcharged and Refund Issues", "mention_count": 1, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-28", "stars_filter": 1, "theme": "Unverified Tickets", "mention_count": 1, "sample_quotes": ["I could have gotten in a lot of trouble with Indonesian immigration officers..."]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Ticket Invalidation", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Invalid Ticket", "mention_count": 4, "sample_quotes": ["does not look legit", "looks like a scam"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Unresponsive Service", "mention_count": 4, "sample_quotes": ["never got an answer", "they replied with the most condescending tone"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Unhelpful Response", "mention_count": 3, "sample_quotes": ["never arrived", "never arrived"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Incorrect Itinerary Details", "mention_count": 3, "sample_quotes": ["spelling mistakes", "incorrect routes"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Processing Time", "mention_count": 3, "sample_quotes": ["took 3 weeks", "they tookstole the $60 payment for four tickets required", "at the moment we are just waiting for the bank processing time"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "System Errors", "mention_count": 2, "sample_quotes": ["unsearchable", "unreachable"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Unverified Itineraries", "mention_count": 2, "sample_quotes": ["non verifiable", "unverified"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Ticket Number", "mention_count": 2, "sample_quotes": ["I got the ticket quick", "most of the times using this website will give you a legitimate airline ticket number"]}, {"competitor": "bestonwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Clarity", "mention_count": 1, "sample_quotes": ["I really wish this was clearly communicated on their website"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Invalid Tickets", "mention_count": 3, "sample_quotes": ["The only email I get is the ticket is not valid!", "They gave me proof that their ticket was valid and confirmed so I could get a refund for the return ticket, but they They stall and do not respond, nor do they give any useful answers."]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Slow Delivery", "mention_count": 3, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Fraud", "mention_count": 2, "sample_quotes": ["Don't fall for their scam", "They give you 2 day flight PNR which gets expired before your application reaches the embassy"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Unprofessional Service", "mention_count": 2, "sample_quotes": ["They almost scam me", "They refused a refund and only offered more worthless services!"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "never arrived", "mention_count": 2, "sample_quotes": ["never arrived", "miss Farheen was quick"]}, {"competitor": "dummy-tickets.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 2, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Length of Flight Reservation Validity", "mention_count": 2, "sample_quotes": ["They lie about the length of flight reservation validity", "Disgusting practice as people rely on the tickets for their visas to be granted"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Poor Customer Service", "mention_count": 2, "sample_quotes": ["Inability to communicate with clear and expressive English Language", "Slow responses"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Website Scam", "mention_count": 2, "sample_quotes": ["Iâ€™m really disappointed with this website", "Thankfully, I figured this out before applying for my visa"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Processing Time", "mention_count": 2, "sample_quotes": ["Processing time of visa application I need the ticket at specific date", "They only make money"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Unreliable Website", "mention_count": 2, "sample_quotes": ["Scammers!!!!!", "They are frauds they received money"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 2, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "dummyticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Service Mismatch", "mention_count": 2, "sample_quotes": ["not in the same format", "service not same as before"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Slow Delivery", "mention_count": 4, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Slow Delivery", "mention_count": 3, "sample_quotes": ["took 3 weeks", "never arrived"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Routing Issues", "mention_count": 2, "sample_quotes": ["only had a booking ref", "missed my flight"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 2, "theme": "Inconvenience", "mention_count": 2, "sample_quotes": ["no option for you to check the itinerary prior booking", "big inconvenience in my personal case"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 3, "theme": "Verification Issues", "mention_count": 2, "sample_quotes": ["I had booked a ticket through their platform at the airport on March 9, 2025, and received a PDF file with the booking details. However, when I tried to verify the ticket on the airlineâ€™s website, it ", "The support team did respond, and I eventually received what I paid for. Thatâ€™s why Iâ€™ve decided to upgrade my review from 1 to 3 stars."]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Disgusting ticket", "mention_count": 1, "sample_quotes": ["such a disgusting ticket i received, i wanted a ticket from athens to prague, they gave it via dubai, which is rediculos"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Overcharge", "mention_count": 1, "sample_quotes": ["charged me 32,00 USD"]}, {"competitor": "onwardticket.com", "scrape_date": "2026-02-27", "stars_filter": 1, "theme": "Verification Issues", "mention_count": 1, "sample_quotes": ["couldn't be verified with the airline"]}], "diffs": [{"competitor": "dummyticket.com", "diff_date": "2026-02-28", "page_type": "homepage", "diff_text": "--- snapshot:22\n+++ snapshot:28\n@@ -100,10 +100,10 @@\n Fill up the form below and one of us will get in touch with you\n Please enable JavaScript in your browser to complete this form.\n Please enable JavaScript in your browser to complete this form.\n+message Your\n *\n First\n Last\n-Your message\n Your message\n Send Message\n OFFICE ADDRESS", "additions_count": 1, "removals_count": 1}, {"competitor": "dummyticket.com", "diff_date": "2026-02-27", "page_type": "homepage", "diff_text": "--- snapshot:16\n+++ snapshot:22\n@@ -103,7 +103,7 @@\n *\n First\n Last\n-message Your\n+Your message\n Your message\n Send Message\n OFFICE ADDRESS", "additions_count": 1, "removals_count": 1}, {"competitor": "dummyticket.com", "diff_date": "2026-02-26", "page_type": "homepage", "diff_text": "--- snapshot:10\n+++ snapshot:16\n@@ -103,7 +103,7 @@\n *\n First\n Last\n-Your message\n+message Your\n Your message\n Send Message\n OFFICE ADDRESS\n@@ -144,8 +144,8 @@\n Affiliate Program\n FAQ\n Contact\n-Copyright 2023\n-DUMMYTICKET.COM\n+Copyright 2026\n+US Vacations\n Â© All Rights Reserved. Website designed and developed by\n Ktini Web Services\n Select your currency", "additions_count": 3, "removals_count": 3}, {"competitor": "vizafly.com", "diff_date": "2026-02-26", "page_type": "homepage", "diff_text": "--- snapshot:12\n+++ snapshot:18\n@@ -20,5 +20,5 @@\n Email:\n support@vizafly.com\n Â©\n-2025\n+2026\n vizafly. All rights reserved.", "additions_count": 1, "removals_count": 1}, {"competitor": "dummy-tickets.com", "diff_date": "2026-02-23", "page_type": "homepage", "diff_text": "--- snapshot:5\n+++ snapshot:11\n@@ -70,7 +70,7 @@\n 03\n Live PNR\n We provide dummy tickets with a live PNR that can be easily verified on the official airline website.\n-We provide the dummy ticket with a Live PNR that can be verified at Airline websites. Likewise, our hotel bookings also come with a booking no. which can be cross-checked at the Hotel website or by mailing directly to the Hotel.\n+We provide the dummy ticket with a Live PNR that can be verified at official website of airline.\n 04\n Cheapest Price\n We offer the most competitive dummy ticket prices in the market, starting from just $5.\n@@ -122,7 +122,7 @@\n $\n Verifiable flight reservation.\n Maximum of 2 Flights.\n-Validity Depends on Travel Date. Generally, Valid for 1 - 2 weeks.\n+Validity varies from 48 hours to 2 weeks.\n Urgent Delivery between 30 to 60 minutes.\n â‚¹400\n Buy Now", "additions_count": 2, "removals_count": 2}, {"competitor": "dummyticket.com", "diff_date": "2026-02-23", "page_type": "homepage", "diff_text": "--- snapshot:4\n+++ snapshot:10\n@@ -103,7 +103,7 @@\n *\n First\n Last\n-message Your\n+Your message\n Your message\n Send Message\n OFFICE ADDRESS", "additions_count": 1, "removals_count": 1}], "ab_tests": []};

// â”€â”€ Colours â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PALETTE = ['#2563eb','#16a34a','#dc2626','#9333ea','#d97706','#0891b2','#db2777','#65a30d'];
const colorMap = {};
function color(domain) {
  if (!colorMap[domain]) {
    colorMap[domain] = PALETTE[Object.keys(colorMap).length % PALETTE.length];
  }
  return colorMap[domain];
}

// Pre-assign colours in competitor order so they're stable
DATA.competitors.forEach(c => color(c.domain));

// â”€â”€ Escape â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function esc(s) {
  return String(s ?? '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function dot(domain) {
  return `<span class="competitor-dot" style="background:${color(domain)}"></span>`;
}
function priceBadge(amount, currency) {
  if (amount == null) return 'â€”';
  const p = parseFloat(amount);
  const cls = p > 30 ? 'high' : p > 15 ? 'mid' : '';
  return `<span class="price-badge ${cls}">${currency || '$'}${p.toFixed(2)}</span>`;
}
function stars(rating) {
  if (rating == null) return '';
  const full = Math.floor(rating);
  const half = (rating - full) >= 0.5 ? 1 : 0;
  const empty = 5 - full - half;
  return 'â˜…'.repeat(full) + (half ? 'Â½' : '') + 'â˜†'.repeat(empty);
}

// â”€â”€ Chart helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const chartInstances = {};
function mkChart(canvasId, labels, datasets, tickFn) {
  if (chartInstances[canvasId]) chartInstances[canvasId].destroy();
  const ctx = document.getElementById(canvasId)?.getContext('2d');
  if (!ctx) return;
  chartInstances[canvasId] = new Chart(ctx, {
    type: 'line',
    data: { labels, datasets },
    options: {
      responsive: true, maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: { legend: { position: 'top', labels: { usePointStyle: true, boxWidth: 10 } } },
      scales: {
        x: { grid: { color: '#f1f5f9' }, ticks: { font: { size: 11 }, maxRotation: 45 } },
        y: { grid: { color: '#f1f5f9' }, ticks: { font: { size: 11 }, callback: tickFn }, beginAtZero: false }
      }
    }
  });
}

function buildLineDatasets(rows, dateKey, valueKey, filterFn) {
  const byComp = {};
  for (const r of rows) {
    if (!filterFn(r)) continue;
    if (!byComp[r.competitor]) byComp[r.competitor] = {};
    const existing = byComp[r.competitor][r[dateKey]];
    if (existing === undefined) byComp[r.competitor][r[dateKey]] = parseFloat(r[valueKey]);
  }
  const dates = [...new Set(rows.map(r => r[dateKey]).filter(Boolean))].sort();
  const datasets = Object.entries(byComp).map(([comp, byDate]) => ({
    label: comp,
    data: dates.map(d => byDate[d] ?? null),
    borderColor: color(comp),
    backgroundColor: color(comp) + '22',
    fill: false, tension: 0.35, pointRadius: 4, pointHoverRadius: 6, spanGaps: true,
  }));
  return { dates, datasets };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRICING TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPricing() {
  const el = document.getElementById('tab-pricing');

  const v2Prices = DATA.prices_v2.map(r => r.main_price).filter(p => p != null);
  const latestDates = [...new Set(DATA.prices_v2.map(r => r.scrape_date).filter(Boolean))].sort();
  const latestDate = latestDates[latestDates.length - 1] || 'â€”';

  const chips = `
    <div class="summary-bar">
      <div class="chip"><div class="chip-label">Competitors</div><div class="chip-value">${DATA.competitors.length}</div><div class="chip-sub">tracked</div></div>
      <div class="chip"><div class="chip-label">Lowest price</div><div class="chip-value">${v2Prices.length ? '$' + Math.min(...v2Prices).toFixed(2) : 'â€”'}</div><div class="chip-sub">across all</div></div>
      <div class="chip"><div class="chip-label">Highest price</div><div class="chip-value">${v2Prices.length ? '$' + Math.max(...v2Prices).toFixed(2) : 'â€”'}</div><div class="chip-sub">across all</div></div>
      <div class="chip"><div class="chip-label">Last updated</div><div class="chip-value" style="font-size:.95rem;">${esc(latestDate)}</div><div class="chip-sub">most recent scrape</div></div>
    </div>`;

  // Current prices: latest record per competitor
  const compDomains = DATA.competitors.map(c => c.domain);
  const latestByComp = {};
  for (const r of DATA.prices_v2) {
    if (!latestByComp[r.competitor] || r.scrape_date > latestByComp[r.competitor].scrape_date) {
      latestByComp[r.competitor] = r;
    }
  }
  const matrixRows = compDomains.map(d => {
    const r = latestByComp[d];
    return `<tr>
      <td>${dot(d)}${esc(d)}</td>
      <td>${r ? priceBadge(r.main_price, r.currency) : '<span style="color:#94a3b8">No data</span>'}</td>
      <td>${r ? esc(r.scrape_date) : 'â€”'}</td>
      <td>${r ? (r.addons || []).map(a => `<span class="addon-tag">${esc(a.name)}: ${a.price != null ? '$'+parseFloat(a.price).toFixed(2) : '?'}</span>`).join('') || '<span style="color:#94a3b8">â€”</span>' : 'â€”'}</td>
    </tr>`;
  }).join('');

  const matrix = `
    <div class="card">
      <div class="card-header">ğŸ’° Current Prices <span class="badge badge-gray" style="margin-left:auto;">${esc(latestDate)}</span></div>
      <div class="card-body">
        <div class="table-wrap">
          <table>
            <thead><tr><th>Competitor</th><th>Price</th><th>Last Scraped</th><th>Add-ons</th></tr></thead>
            <tbody>${matrixRows}</tbody>
          </table>
        </div>
      </div>
    </div>`;

  // Price trend chart
  const { dates: trendDates, datasets: trendDS } = buildLineDatasets(
    DATA.prices_v2, 'scrape_date', 'main_price', r => r.main_price != null
  );
  const trendChart = trendDates.length ? `
    <div class="card">
      <div class="card-header">ğŸ“ˆ Price Trend</div>
      <div class="card-body">
        <div class="chart-container"><canvas id="chartPriceTrend"></canvas></div>
      </div>
    </div>` : '';

  el.innerHTML = chips + matrix + trendChart;

  if (trendDates.length) {
    mkChart('chartPriceTrend', trendDates, trendDS, v => '$' + v.toFixed(2));
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REVIEWS TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function renderReviews() {
  const el = document.getElementById('tab-reviews');
  const rows = DATA.reviews_trustpilot;

  if (!rows.length) {
    el.innerHTML = `<div class="card"><div class="card-body"><div class="empty-state"><div class="icon">ğŸ”</div><div class="label">No review data yet</div></div></div></div>`;
    return;
  }

  // Group by competitor, sorted by date desc
  const byComp = {};
  for (const r of rows) {
    if (!byComp[r.competitor]) byComp[r.competitor] = [];
    byComp[r.competitor].push(r);
  }

  // Day-over-day delta table: latest vs previous for each competitor
  const deltaRows = Object.keys(byComp).sort().map(comp => {
    const sorted = byComp[comp].sort((a,b) => b.scrape_date.localeCompare(a.scrape_date));
    const latest = sorted[0];
    const prev = sorted.length > 1 ? sorted[1] : null;

    const ratingDelta = prev && latest.overall_rating != null && prev.overall_rating != null
      ? (latest.overall_rating - prev.overall_rating).toFixed(2)
      : null;
    const countDelta = prev && latest.total_reviews != null && prev.total_reviews != null
      ? latest.total_reviews - prev.total_reviews
      : null;

    const ratingBadge = ratingDelta !== null
      ? `<span style="color:${parseFloat(ratingDelta) >= 0 ? '#15803d' : '#dc2626'};font-weight:600;">${parseFloat(ratingDelta) >= 0 ? '+' : ''}${ratingDelta}</span>`
      : '<span style="color:#94a3b8">â€”</span>';
    const countBadge = countDelta !== null
      ? `<span style="color:${countDelta >= 0 ? '#15803d' : '#dc2626'};font-weight:600;">${countDelta >= 0 ? '+' : ''}${countDelta}</span>`
      : '<span style="color:#94a3b8">â€”</span>';

    return `<tr>
      <td>${dot(comp)}${esc(comp)}</td>
      <td><span class="rating-stars">${stars(latest.overall_rating)}</span> ${latest.overall_rating?.toFixed(1) ?? 'â€”'}</td>
      <td>${ratingBadge}</td>
      <td>${latest.total_reviews != null ? latest.total_reviews.toLocaleString() : 'â€”'}</td>
      <td>${countBadge}</td>
      <td style="color:#64748b;font-size:.8rem;">${esc(latest.scrape_date)}</td>
    </tr>`;
  }).join('');

  // Trend charts
  const { dates: ratingDates, datasets: ratingDS } = buildLineDatasets(
    rows, 'scrape_date', 'overall_rating', r => r.overall_rating != null
  );
  const { dates: countDates, datasets: countDS } = buildLineDatasets(
    rows, 'scrape_date', 'total_reviews', r => r.total_reviews != null
  );

  // Pain Points from sentiment data
  const sentiment = DATA.reviews_sentiment || [];
  const latestSentDate = sentiment.length ? sentiment[0].scrape_date : null;
  const latestSent = sentiment.filter(r => r.scrape_date === latestSentDate);

  // Group by competitor
  const sentByComp = {};
  for (const s of latestSent) {
    if (!sentByComp[s.competitor]) sentByComp[s.competitor] = [];
    sentByComp[s.competitor].push(s);
  }

  const painCards = Object.keys(sentByComp).sort().map(comp => {
    const themes = sentByComp[comp];
    const themeRows = themes.map(t => {
      const starLabel = t.stars_filter === 1 ? 'â­' : t.stars_filter === 2 ? 'â­â­' : 'â­â­â­';
      const quotes = (t.sample_quotes || []).map(q => `<em style="color:#94a3b8;font-size:.78rem;">"${esc(q.substring(0,120))}"</em>`).join(', ');
      return `<tr>
        <td style="font-weight:600;">${esc(t.theme)}</td>
        <td style="text-align:center;">${starLabel}</td>
        <td style="text-align:center;font-weight:700;">${t.mention_count}</td>
        <td style="max-width:300px;overflow:hidden;text-overflow:ellipsis;">${quotes || 'â€”'}</td>
      </tr>`;
    }).join('');

    return `
      <div class="card" style="margin-bottom:1rem;">
        <div class="card-header">${dot(comp)} ${esc(comp)} â€” Pain Points</div>
        <div class="card-body">
          <div class="table-wrap">
            <table>
              <thead><tr><th>Theme</th><th>Stars</th><th>Mentions</th><th>Sample Quotes</th></tr></thead>
              <tbody>${themeRows}</tbody>
            </table>
          </div>
        </div>
      </div>`;
  }).join('');

  el.innerHTML = `
    <div class="card">
      <div class="card-header">â­ Review Snapshot (vs previous day)</div>
      <div class="card-body">
        <div class="table-wrap">
          <table>
            <thead><tr><th>Competitor</th><th>Rating</th><th>Î” Rating</th><th>Reviews</th><th>Î” Reviews</th><th>Date</th></tr></thead>
            <tbody>${deltaRows}</tbody>
          </table>
        </div>
      </div>
    </div>
    ${ratingDates.length ? `
    <div class="charts-row">
      <div class="card" style="margin-bottom:0;">
        <div class="card-header">â­ Rating Trend</div>
        <div class="card-body"><div class="chart-container"><canvas id="chartReviewRating"></canvas></div></div>
      </div>
      <div class="card" style="margin-bottom:0;">
        <div class="card-header">ğŸ’¬ Review Count Trend</div>
        <div class="card-body"><div class="chart-container"><canvas id="chartReviewCount"></canvas></div></div>
      </div>
    </div><div style="margin-bottom:1.25rem;"></div>` : ''}
    ${painCards ? `<div class="card"><div class="card-header">ğŸ”´ Customer Pain Points <span class="badge badge-gray" style="margin-left:auto;">${latestSentDate || 'â€”'}</span></div></div>${painCards}` : ''}`;

  if (ratingDates.length) {
    mkChart('chartReviewRating', ratingDates, ratingDS, v => v.toFixed(1) + 'â˜…');
    mkChart('chartReviewCount',  countDates,  countDS,  v => v.toLocaleString());
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DIFFS TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDiffLine(line) {
  const e = esc(line);
  if (line.startsWith('+++') || line.startsWith('---')) return `<span class="diff-line diff-line-hdr">${e}</span>`;
  if (line.startsWith('@@'))  return `<span class="diff-line diff-line-hdr">${e}</span>`;
  if (line.startsWith('+'))   return `<span class="diff-line diff-line-add">${e}</span>`;
  if (line.startsWith('-'))   return `<span class="diff-line diff-line-rem">${e}</span>`;
  return `<span class="diff-line diff-line-ctx">${e}</span>`;
}

function renderDiffs() {
  const el = document.getElementById('tab-diffs');

  if (!DATA.diffs.length) {
    el.innerHTML = `<div class="card"><div class="card-body"><div class="empty-state"><div class="icon">ğŸ”</div><div class="label">No site changes detected yet</div></div></div></div>`;
    return;
  }

  // Only show entries where something actually changed
  const changed = DATA.diffs.filter(r => (r.additions_count > 0 || r.removals_count > 0));

  if (!changed.length) {
    el.innerHTML = `<div class="card"><div class="card-body"><div class="empty-state"><div class="icon">âœ…</div><div class="label">No changes detected across all competitors</div></div></div></div>`;
    return;
  }

  const items = changed.map((r, i) => {
    // Only render + and - lines from the diff (skip context lines and headers)
    const relevantLines = (r.diff_text || '').split('\n').filter(line =>
      line.startsWith('+') || line.startsWith('-')
    );
    const diffHtml = relevantLines.length
      ? `<div class="diff-body"><pre class="diff-pre">${relevantLines.map(renderDiffLine).join('\n')}</pre></div>`
      : '';

    return `<div class="diff-item">
      <div class="diff-item-header">
        <div class="competitor-name">${dot(r.competitor)}${esc(r.competitor)}</div>
        <span class="diff-meta">${esc(r.diff_date)} Â· ${esc(r.page_type || 'homepage')}</span>
        <div class="diff-counts">
          <span class="diff-add-count">+${r.additions_count} added</span>
          <span class="diff-rem-count">-${r.removals_count} removed</span>
        </div>
      </div>
      ${diffHtml}
    </div>`;
  }).join('');

  el.innerHTML = `
    <div class="card">
      <div class="card-header">ğŸ”„ Website Changes <span class="badge badge-gray" style="margin-left:auto;">${changed.length} change${changed.length !== 1 ? 's' : ''}</span></div>
      <div class="card-body">${items}</div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// A/B TESTS TAB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderAbTests() {
  const el = document.getElementById('tab-abtests');

  if (!DATA.ab_tests.length) {
    el.innerHTML = `<div class="card"><div class="card-body"><div class="empty-state"><div class="icon">ğŸ§ª</div><div class="label">No A/B tests detected yet</div></div></div></div>`;
    return;
  }

  const rows = DATA.ab_tests.map(r => `<tr>
    <td>${dot(r.competitor)}${esc(r.competitor)}</td>
    <td>${esc(r.scrape_date)}</td>
    <td style="max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${esc(r.page_url)}</td>
    <td>${esc(r.tool_name || 'â€”')}</td>
    <td>${r.detected ? '<span class="badge badge-red">Detected</span>' : '<span class="badge badge-gray">None</span>'}</td>
    <td style="max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${esc(r.evidence || 'â€”')}</td>
  </tr>`).join('');

  el.innerHTML = `
    <div class="card">
      <div class="card-header">ğŸ§ª A/B Test Detection <span class="badge badge-gray" style="margin-left:auto;">${DATA.ab_tests.length} records</span></div>
      <div class="card-body">
        <div class="table-wrap">
          <table>
            <thead><tr><th>Competitor</th><th>Date</th><th>URL</th><th>Tool</th><th>Detected</th><th>Evidence</th></tr></thead>
            <tbody>${rows}</tbody>
          </table>
        </div>
      </div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TAB SWITCHING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const rendered = {};

function switchTab(name) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === name));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.toggle('active', p.id === 'tab-' + name));

  if (!rendered[name]) {
    rendered[name] = true;
    if (name === 'pricing')  renderPricing();
    if (name === 'reviews')  renderReviews();
    if (name === 'diffs')    renderDiffs();
    if (name === 'abtests')  renderAbTests();
  }
}

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => switchTab(btn.dataset.tab));
});

switchTab('pricing');
</script>
</body>
</html>
